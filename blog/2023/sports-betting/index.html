<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>O cassino das apostas esportivas | Eduardo Figueiredo</title> <meta name="author" content="Eduardo Figueiredo"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="machine-learning, robustness, control-theory, statistics"> <link rel="stylesheet" href="/al-folio/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/al-folio/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/al-folio/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/al-folio/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://eduardofmdcosta.github.io/al-folio/blog/2023/sports-betting/"> <link rel="stylesheet" href="/al-folio/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/al-folio/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/al-folio/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/al-folio/"><span class="font-weight-bold">Eduardo </span>Figueiredo</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/al-folio/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/al-folio/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/teaching/">teaching</a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/people/">people</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/al-folio/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/al-folio/projects/">projects</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">O cassino das apostas esportivas</h1> <p class="post-meta">August 21, 2023</p> <p class="post-tags"> <a href="/al-folio/blog/2023"> <i class="fa-solid fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/al-folio/blog/category/jekyll"> <i class="fa-solid fa-tag fa-sm"></i> jekyll</a>   <a href="/al-folio/blog/category/blogging"> <i class="fa-solid fa-tag fa-sm"></i> blogging</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>As casas de aposta esportiva <a href="https://www.uol.com.br/esporte/futebol/ultimas-noticias/2023/03/31/patrocinios-de-sites-de-apostas-a-clubes-da-serie-a-batem-r-330-mi-por-ano.htm" rel="external nofollow noopener" target="_blank">dominaram o futebol brasileiro</a> nos últimos anos. Suas marcas parecem onipresentes: publicidade em TV e internet, patrocínios estampados em uniformes, outdoors. Curiosamente, até há pouquíssimo tempo, estas empresas ainda gozavam de lacunas tributária e regulatória que criavam incentivos adicionais à proliferação da atividade - situação que deve ser resolvida com uma <a href="https://g1.globo.com/politica/noticia/2023/07/25/mp-das-apostas.ghtml" rel="external nofollow noopener" target="_blank">recente MP proposta por Haddad</a>.</p> <p>Mas o que está por trás do interesse de tantos agentes em mediar apostas esportivas? Quais são os fundamentos da lucratividade dessa atividade? Apesar de nunca ter apostado em resultados esportivos (com exceção de uma pizza que tive de pagar para meu grande amigo Artur S. após a vitória da Itália na Eurocopa de 2020), pretendo apresentar algumas reflexões sobre a matemática das apostas.</p> <p>1) <strong>Funcionamento das apostas no Brasil</strong></p> <p>Para apostas no vencedor da partida, a casa precifica cotações para a vitória do mandante, visitante e empate. Por exemplo, suponha que a cotação do empate seja $2.5$. Caso o jogo termine em igualdade de placar, para cada <code>$</code> 1 colocado nesse resultado, o apostador receberá <code>$</code> 2.50 (tendo, assim, uma rentabilidade de <code>$</code> 1.50 - pois o real inicialmente apostado faz parte do pagamento).</p> <p>2) <strong>Por que $\frac{1}{\text{cotação}}$ pode traduzir a probabilidade do evento?</strong></p> <p>No nosso exemplo anterior, muitos sites indicarão que a probabilidade de empate implícita na cotação de 2.5 é $\frac{1}{2.5} = 40$%. Mas como justificar essa conta?</p> <p>Isso deriva de um argumento de <em>competição perfeita</em>. Em um mercado perfeitamente competitivo entre as casas de aposta, as cotações devem ser tais que o rendimento esperado para o apostador seja nulo (se as cotações apresentadas implicassem redimentos esperados positivos, a casa perderia dinheiro no longo prazo; se negativos, abririam oportunidade para que outras casas oferecessem melhores cotações e absorvessem <em>market share</em>).</p> <p>Sejam $R$ a variável aleatória que representa o <strong>rendimento</strong> do apostador para cada <code>$</code>1 apostado e $k_{\text{evento}}$ a cotação de um determinado evento (e.g. vitória do mandante).</p> \[R = \begin{cases} k_{\text{evento}}-1 &amp; \text{se evento ocorre } (p_{\text{evento}}) \\ -1 &amp; \text{se evento não ocorre } (1-p_{\text{evento}}) \end{cases}\] <p>Então,</p> \[\mathbb{E}(R) = (k_{\text{evento}}-1)p_{\text{evento}} + (-1)(1-p_{\text{evento}}) = 0 \implies p_{\text{evento}} = \frac{1}{k_{\text{evento}}}\] <p>Ou seja, se a casa acredita que a probabilidade do evento é de $50$%, então, sob hipótese de competição perfeita, ela seria “forçada” (pela própria dinâmica do mercado) a oferecer uma cotação de $k_{\text{evento}} = \frac{1}{p_{\text{evento}}} = \frac{1}{0.5} = 2$. É evidente que esta é uma explicação simplificada, mas ajuda a entender o racional. Argumentos similares (e com maior grau de formalidade) podem ser encontrados em livros básicos de Microeconomia.</p> <p>3) <strong>A hipótese de competição perfeita é válida na prática?</strong></p> <p>Não. Não há competição perfeita nesse mercado (que parece mais uma espécie de oligopólio) e, ainda, há custos de operação que devem ser cobertos pela casa.</p> <p>Dessa forma, $\frac{1}{k_{\text{evento}}}$ não representa a probabilidade implícita do evento estimada pela casa. Representa, no máximo, uma <em>proxy</em> dessa quantidade.</p> <p>Uma evidência adicional dessa afirmação é que a soma $\frac{1}{k_{\text{Mandante}}} + \frac{1}{k_{\text{Visitante}}} + \frac{1}{k_{\text{Empate}}}$ é usualmente maior que $1$. Por exemplo, consultando as cotações de uma famosa plataforma para o majestoso clássico entre Sydney Olympic vs Sydney United, temos as seguintes cotações: $4.00$ (vitória Sydney Olympic), $1.80$ (Sydney United) e $3.60$ (empate). Ora, $\frac{1}{4.00} + \frac{1}{1.80} + \frac{1}{3.60} = 108.3$%. A soma das “probabilidades” é superior a $100$%.</p> <p>4) <strong>Por que a soma é superior a 1?</strong></p> <p>Este é o ingrediente que permite as casas garantirem lucros que independem do resultado final da partida. Sejam $k_{i}$ as cotações de cada evento e $V_{i}$ os respectivos valores apostados. O “lucro operacional” da plataforma será dado pelo que ela arrecada de apostas derrotadas menos o que ela precisa pagar aos vencedores.</p> <p>No caso da <strong>vitória do mandante</strong>, o <em>bottom line</em> operacional da plataforma é dado por:</p> \[V_{\text{Visitante}} + V_{\text{Empate}} - (k_{\text{Mandante}}-1)V_{\text{Mandante}}\] <p>Analogamente, em caso de <strong>vitória do visitante</strong>:</p> \[V_{\text{Mandante}} + V_{\text{Empate}} - (k_{\text{Visitante}}-1)V_{\text{Visitante}}\] <p>Finalmente, se a partida termina <strong>empatada</strong>:</p> \[V_{\text{Mandante}} + V_{\text{Visitante}} - (k_{\text{Empate}}-1)V_{\text{Empate}}\] <p>Para que a casa de apostas tenha lucro em qualquer caso, basta que as três expressões sejam positivas.</p> \[\begin{cases} V_{\text{Visitante}} + V_{\text{Empate}} - (k_{\text{Mandante}}-1)V_{\text{Mandante}} &gt; 0 \\ V_{\text{Mandante}} + V_{\text{Empate}} - (k_{\text{Visitante}}-1)V_{\text{Visitante}} &gt; 0 \\ V_{\text{Mandante}} + V_{\text{Visitante}} - (k_{\text{Empate}}-1)V_{\text{Empate}} &gt; 0 \end{cases} \implies \begin{cases} V_{\text{Mandante}} &lt; \frac{V_{\text{Visitante}} + V_{\text{Empate}}}{k_{\text{Mandante}}-1} \\ V_{\text{Visitante}} &lt; \frac{V_{\text{Mandante}} + V_{\text{Empate}}}{k_{\text{Visitante}}-1} \\ V_{\text{Empate}} &lt; \frac{V_{\text{Mandante}} + V_{\text{Visitante}}}{k_{\text{Empate}}-1} \end{cases}\] <p>Seja $V$ o volume financeiro total de apostas para aquela partida, ou seja, $V = V_{\text{Mandante}} + V_{\text{Visitante}} + V_{\text{Empate}}$. As inequações anteriores podem ser reescritas como (lembrando que $k_{i} = \frac{1}{p_i}$):</p> \[V_{i} &lt; \frac{V - V_{i}}{k_{i} - 1} \implies V_{i}k_{i} &lt; V \implies V_{i} &lt; \frac{V}{k_{i}} \implies V_{i} &lt; p_{i}V\] <p>Dessa forma, dado um conjunto de cotações, basta encontrarmos $V_{\text{Mandante}}$, $V_{\text{Visitante}}$ e $V_{\text{Empate}}$ tais que:</p> \[\begin{cases} V_{i} &lt; p_{i}V \\ \sum_{i} V_i = V \end{cases}\] <p>O fato de que $\sum_{i} p_i &gt; 1$ faz com que o sistema tenha solução para qualquer volume financeiro $V$ (isto fica como exercício para o leitor). Portanto, seja qual for o resultado da partida, se a distribuição das apostas estiver coerente com as restrições acima, a casa ganhará dinheiro.</p> <p>Obviamente, o leitor atento certamente percebeu que estamos sendo pouco precisos com os termos contábeis desta seção. As casas incorrem múltiplos custos operacionais (custos de servidores, equipes de programadores, cientistas de dados, etc), e despesas (e.g. <em>marketing</em>) e, dessa forma, o que temos chamado de <em>lucro</em>, não o é de fato.</p> <p>Além disso, no raciocício acima, fixamos as cotações e assumimos que a casa é capaz de ajustar os volumes de cada aposta. Na realidade, este processo ocorre de maneira dinâmica, com a plataforma oferecendo cotações mais ou menos vantajosas ao longo do tempo para ajustar o portfólio de apostas.</p> <p>5) <strong>É possível bater o mercado (i.e. obter retornos positivos interesantes de maneira consistente)?</strong></p> <p>Se eu soubesse a resposta dessa pergunta, provavelmente estaria tomando um <em>mojito</em> em uma praia do Caribe e não escrevendo um post de um blog que (quase) ninguém lê. Em teoria, alguém que dispõe de um modelo preditivo de altíssima acurácia (em outras palavras, cujas estimativas das distribuições de probabilidade dos resultados seja, de fato, muito próximas das reais) poderia apostar em jogos em que haja discordância em relação às “probabilidades implícitas” nas cotações. Ou seja, se a casa precifica uma cotação cuja probabilidade implícita de vitória do mandante é de 30% e o seu poderoso modelo indica 90%, deve valer a pena comprar esta aposta. No longo prazo, esta estratégia deve quase certamente retornar lucros consistentes. No entanto, é evidente que obter um tal sistema preditivo é extremamente complicado. Lembre-se que as principais casas de apostas empregam vastas equipes de cientistas de dados trabalhando nos modelos de cotação e, portanto, “superá-los” não é uma tarefa simples.</p> <p>Existem, porém, alternativas que não dependem da criação de sistemas proprietários. <a href="https://arxiv.org/abs/1710.02824" rel="external nofollow noopener" target="_blank">Kaunitz, Zhong &amp; Kreiner (2017)</a> apresentam uma estratégia baseada na comparação de cotações providas por várias plataformas. O ponto mais interessante do artigo, entretanto, é o fato de que as casas começaram a dificultar as apostas dos pesquisadores assim que a estratégia se provou capaz de originar retornos positivos de maneira consistente. Isso mostra que as plataformas exercem uma discriminação operacional contra apostadores recorrentemente vitoriosos.</p> <p>Quem faz dinheiro com apostas esportivas são as casas, não os apostadores. Afinal, o patrocínio master do seu clube é provavelmente uma <em>bet</em> qualquer e não o nome do seu vizinho.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2023/selecao-brasileira-dominio-distribuicao-maximo/">Por que pequenos países conseguem formar grandes seleções?</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2021/distill/">a distill-style blog post</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2023/post-bibliography/">a post with bibliography</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2015/code/">a post with code</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2020/github-metadata/">a post with github metadata</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Eduardo Figueiredo. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/al-folio/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/al-folio/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/al-folio/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/al-folio/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/al-folio/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/al-folio/assets/js/copy_code.js?07b8786bab9b4abe90d10e61f7d12ff7" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>